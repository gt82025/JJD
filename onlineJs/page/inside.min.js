$(function(){var e=navigator.userAgent,t={isChrome:/chrome/i.test(e),isFirefox:/firefox/i.test(e),isSafari:/safari/i.test(e),isIE:/msie/i.test(e)||/trident/i.test(e),isEdge:/edge/i.test(e)},i=new Array;i[0]=[],i[1]=[];var n=[];$("img.svg").each(function(e,a){function s(e){var i=null;if(u||(i=e.find("style").get(0))&&(t.isIE||t.isEdge)&&(i.textContent+=""),e.find("style").remove(),d){var n=e.find("#"+d).get(0);e=e.empty(),e.append(n)}if(u||e.append(i),void 0!==o&&(e=e.attr("id",o)),void 0!==l){var a=e.attr("class");a=a||"",e=e.attr("class",a+" "+l+" replaced-svg")}r.replaceWith(e)}var r=jQuery(this),o=r.attr("id"),l=r.attr("class"),c=r.attr("data-svg")||r.attr("data-src")||r.attr("src"),f=c.split("#")[0],d=c.split("#")[1],u=i[0].some(function(e){return e==f});u?n[e]=setInterval(function(){var t=i[0].indexOf(f),a=i[1][t];if(a){clearInterval(n[e]);s(a.clone())}else console.log(a)},500):(i[0].push(f),function(){jQuery.get(f,function(e){var t=jQuery(e).find("svg");t=t.removeAttr("xmlns:a");var n=i[0].indexOf(f);i[1][n]=t.clone(),t=i[1][n].clone(),s(t)},"xml")}())})}),$(function(){function e(){$(".filter-button").click(function(){var e=$(this).attr("data-filter");"all"===e?$(".filter-item").addClass("showFilter").show():($(".filter-item").not("."+e).removeClass("hideFilter").hide(),$(".filter-item").filter("."+e).addClass("showFilter").show())}),$(".filter-button").click(function(){$(this).siblings().removeClass("is-active"),$(this).addClass("is-active")})}function t(){$(".dropdown-select").change(function(){var e=$(this).val(),t=$(".filter-item");$(".filter-item li").hide("3000"),"all"===e?t.addClass("showFilter").show():(t.not("."+e).removeClass("hideFilter").hide(),t.filter("."+e).addClass("showFilter").show())})}function i(){$(".clampThis").each(function(e,t){$clamp(t,{clamp:2,useNativeClamp:!1})})}function n(e){o=r.scrollTop()}function a(n){e(),t(),i()}function s(n){e(),t(),i()}var r=$(window),o=(r.innerWidth(),r.innerHeight(),r.scrollTop());/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),function(){$("<select />",{class:"dropdown-select"}).appendTo("#filter-dropdown"),$("<option />",{selected:"selected",value:"",text:"請選擇類別"}).appendTo("nav select"),$("#filter-dropdown a").each(function(){var e=$(this);$("<option />",{value:e.attr("href"),"data-filter":e.attr("data-filter"),value:e.attr("data-filter"),text:e.text(),class:"filter-button"}).appendTo("nav select")})}();var l=window;l.addEventListener?(l.addEventListener("scroll",n,!1),l.addEventListener("resize",a,!1),l.addEventListener("load",s,!1)):l.attachEvent&&(l.attachEvent("onscroll",n),l.attachEvent("onresize",n),l.attachEvent("load",s))}),function(e,t,i){var n=navigator.userAgent,a={isChrome:/chrome/i.test(n),isFirefox:/firefox/i.test(n),isSafari:/safari/i.test(n),isIE:/msie/i.test(n)||/trident/i.test(n),isEdge:/edge/i.test(n)};a.isChrome&&(a.isSafari=!1),a.isEdge&&(a.isChrome=!1,a.isSafari=!1);var s=function(t){function n(e,t){return 0==t?e:n(t,e%t)}function a(e,t){var i,a;return""==e||""==t||"0"==e||"0"==t||isNaN(e)||isNaN(t)||(i=n(parseInt(e),parseInt(t))),a="0"!=i?e*t/i:"無意義",[i,a]}var s=t.src,r=e(t);if(!r.hasClass("ie-hack")){var o=t.naturalWidth,l=t.naturalHeight,c=function(e,t){var n=a(e,t)[0],s=i.createElement("canvas");return s.width=e/n,s.height=t/n,s.toDataURL()}(o,l);r.attr("src",c),r.css({"background-repeat":"no-repeat","background-position":"50% 50%","background-image":"url("+s+")","background-size":"cover"}),r.addClass("ie-hack")}};!function(t){a.isIE&&(void 0==t?e(".object-fit img").each(function(){s(this)}):s(t))}()}(jQuery,window,document),function(e,t,i){function n(){f=v.children(h),d=f.length}function a(){g=p,v.children("."+m).removeClass(m)}function s(e,t){n();var i,a="down"==t,s=a?e+1:e-1,r=a?s<d:s>=0;if(a||0!=e)if(a&&s==d)i=d-1;else for(;r;){var o=f.eq(s);if(!o.length){i=e;break}if(s===p||"none"!=o.css("display")){i=s;break}a?s++:s--}else i=p;return i}function r(e){var t=f.eq(e);v.children("."+m).removeClass(m),e!=p&&t.addClass(m),e<=p?u.val(C):u.val(t.text())}function o(e){var t=f.eq(e),i=t.get(0).offsetTop,n=v.innerHeight(),a=v.scrollTop();e!=p&&(i>a+n-30?v.scrollTop(a+w):i<a&&v.scrollTop(i))}function l(e,t){g=s(g,t),r(g),o(g)}function c(){var e,t,i,n;for(e=u.get(0),t=e.value.toUpperCase(),i=v.children(h),n=0;n<i.length;n++)i[n].innerHTML.toUpperCase().indexOf(t)>-1?i[n].style.display="":i[n].style.display="none"}var f,d,u=e(".search-filter-input"),v=e(".search-filter-list"),h="li",p=-1,g=p,m="is--selected",C="";n(),v.on("click",h,function(t){u.val(e(this).text()),g=p,c()}).on("mouseenter",h,function(t){var i=e(this);g=e(this).index(),i.siblings().removeClass(m),i.addClass(m)}).on("mouseleave",function(e){a()}),u.on("focus",function(){v.css("pointer-events","")}).on("focusout",function(){setTimeout(function(){v.css("pointer-events","none"),a(),c()},500)});var w=f.innerHeight();e.fn.focusCampo=function(){return this.each(function(){var e=this;setTimeout(function(){if(null!=e&&0!=e.value.length){if(e.createTextRange){var t=e.createTextRange();t.moveStart("character",e.value.length),t.collapse(),t.select()}else if(e.selectionStart||"0"==e.selectionStart){var i=e.value.length;e.selectionStart=i,e.selectionEnd=i,e.focus()}}else e.focus()},2)})},u.on("keyup",function(e){var t=e.keyCode;if(27===t)v.addClass("hide"),u.val(C);else{""===u.val()&&(8===t||46==t)?a():v.removeClass("hide"),38!=t&&40!=t&&(C=u.val(),c()),38==t&&u.focusCampo()}}).on("keydown",function(e){var t=e.keyCode;if(38===t||40===t)if(g<=p&&38===t);else{var i=38===t?"up":"down";l(g,i)}})}(jQuery,window,document);